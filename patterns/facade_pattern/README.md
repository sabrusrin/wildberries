Вроде написал паттерн но не могу затестить, т.к. не разабрался до конца в воркспейсах.  
Буду разбираться дальше.